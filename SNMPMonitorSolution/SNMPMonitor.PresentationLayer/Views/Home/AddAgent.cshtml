
@{
    ViewBag.Title = "AddAgent";
}

<h1>Broadcast Realtime SQL data using SignalR</h1>
<div id="MonitorForm">
    <form id="MonitorInputForm" action="@Url.Action("AddAgentToMonitor","Data")" method="post">
        <div class="form-group">
            <label for="inputAgentName">Name</label>
            <input type="text" class="form-control" name="inputAgentName" placeholder="Name">
        </div>
        <div class="form-group">
            <label for="inputIpAddress">IP Adress</label>
            <input type="text" class="form-control" name="inputIpAddress" placeholder="192.168.0.1">
        </div>
        <div class="form-group">
            <label for="inputPortNr">Port</label>
            <input type="number" class="form-control" name="inputPortNr" placeholder="161">
        </div>
        <button type="submit" class="btn btn-default">Speichern</button>
    </form>
</div>
<div id="dataContainer">
</div>
@section scripts{
    <script type="text/javascript">
            $(document).ready(function () {
                $("#MonitorInputForm").on("submit", function (e) {
                    e.preventDefault();
                    $.ajax({
                        url: this.action,
                        type: "POST",
                        data: {
                            "inputAgentName": this.inputAgentName.value,
                            "inputIpAddress": this.inputIpAddress.value,
                            "inputPortNr": this.inputPortNr.value
                        },
                        success: function (data) {
                            $("#MonitorInputForm").trigger("reset");
                            $(".alertBox").html("<div class='alert alert-success' role='alert'><strong>Success!</strong> Monitor erfolgreich hinzugefügt</div>");
                        },
                        error: function (data, textStatus, errorThrown) {
                            $(".alertBox").html("<div class='alert alert-error' role='alert'><strong>" + textStatus + "!</strong> " + errorThrown + "</div>");
                        }
                    });
                });
            });

    </script>
}
