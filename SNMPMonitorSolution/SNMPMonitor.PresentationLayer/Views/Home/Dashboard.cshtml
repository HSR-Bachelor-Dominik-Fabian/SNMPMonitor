@Styles.Render("~/Content/dasboardStyles")

<script type="text/javascript">
    $(document).ready(function () {
        loadDashboard();

        var connection = $.hubConnection();
        var notifications = connection.createHubProxy("snmpDataHub");
        notifications.on("receiveInsertDelete", function () {
            loadDashboard();
        });
        connection.start().done(function () {
            notifications.invoke("joinDataGroup", "Agent_General");
        }).fail(function (e) {
            swal({ title: "SignalRError for DashboardMain", text: e, type: "error", confirmButtonClass: "btn-danger" });
        });
    });

    function loadDashboard() {
        $("#dataContainer").empty();
        $.ajax({
            url: "@Url.Action("Monitor_Agent_Small", "MonitorTemplate")",
            method: "GET",
            success: function (data) {
                var templateFunc = doT.template(data);
                $.ajax({
                    url: "@Url.Action("GetAgents", "Data")",
                    method: "GET",
                    success: function (agentData) {
                        $.each(agentData, function (index, value) {
                            $("#dataContainer").append(templateFunc(value));
                        });
                    }
                });
                
            }
        });
    }
</script>

<div id="dataContainer" class="container-fluid">

</div>



