  <script type="text/javascript">
        $(document).ready(function () {
            var connection = $.hubConnection();
            connection.logging = true;
            var notifications = connection.createHubProxy("snmpDataHub");
            notifications.on("receiveData", function (dataValue) {
                if (dataValue.ObjectID == "1.3.6.1.2.1.25.3.3") {
                    appendPoint{{=it.AgentNr}}(dataValue);
                }
            });

            createChart{{=it.AgentNr}}();

            connection.start().done(function () {
                notifications.invoke("joinDataGroup","Agent_{{=it.AgentNr}}");
            }).fail(function (e) {
                alert("SignalRError for AgentNR:{{=it.AgentNr}} " +e);
            });

        });
                    
        function appendPoint{{=it.AgentNr}}(value) {
            var chart = $("#Chart{{=it.AgentNr}}_1_3_6_1_2_1_25_3_3").highcharts();
            var shift = chart.series[0].data.length >= 15;
            var object = JSON.parse(value["Result"]);
            var firstCPU = parseInt(((object["Results"])[2])["Value"]);
            var secondCPU = parseInt(((object["Results"])[3])["Value"]);
            var cpuLoad = (firstCPU + secondCPU) / 2;
            chart.series[0].addPoint({ x:Date.parse(value.MonitorTimestamp + "+02:00"), y: cpuLoad }, true, shift);
        }

        function createChart{{=it.AgentNr}}() {
            Highcharts.setOptions({
                global: {
                    useUTC: false
                }
            });
            $("#Chart{{=it.AgentNr}}_1_3_6_1_2_1_25_3_3").highcharts({
                chart: {
                    type: 'line',
                    height: 300,
                    animation: Highcharts.svg
                },
                title: {
                    text: 'CPU Auslastung'
                },
                xAxis: {
                    type: 'datetime'
                },
                yAxis: {
                    title: {
                        text: 'in %'
                    },
                    min: 0,
                    max: 100
                },
                exporting: {
                    enabled: false
                },
                credits: {
                    enabled: false
                },
                legend: {
                    enabled: false
                },
                series: [{
                    name: "CPU Auslastung",
                    data: (function () {
                        var newdata = [];
                        $.ajax({
                            url: '@Url.Action("HistoryDataForOID","Data")',
                            data: 'id={{=it.AgentNr}}&oid=1.3.6.1.2.1.25.3.3&count=15',
                            async: false,
                            cache: false,
                            method: 'Get',
                            success: function (data) {
                                $.each(data.History, function (index, value) {
                                    var object = JSON.parse(value["Result"]);
                                    var firstCPU = parseInt(((object["Results"])[2])["Value"]);
                                    var secondCPU = parseInt(((object["Results"])[3])["Value"]);
                                    var cpuLoad = (firstCPU + secondCPU) / 2;
                                    newdata.push({ x: new Date(parseInt(value.MonitorTimestamp.replace("/Date(", "").replace(")/", ""))), y: cpuLoad });
                                });
                            }
                        });
                        return newdata;
                    }())
                }]
            });     
        }
    </script>
    <div id="Chart{{=it.AgentNr}}_1_3_6_1_2_1_25_3_3" class="col-xs-12 col-lg-4 col-md-6">

</div>